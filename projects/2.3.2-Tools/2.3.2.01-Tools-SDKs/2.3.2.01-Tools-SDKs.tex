\subsubsection{\stid{2.01} \tools\ Software Development Kits} 

\paragraph{Overview}
The Software Development Tools SDK is a collection of independent projects specifically targeted to address performance analysis at scale. The primary responsibility of the SDK is to coordinate the disparate development, testing, and deployment activities of many individual projects to produce a unified set of tools ready for use on the upcoming exascale machines. The efforts in support of the SDK are designed to fit within the overarching goal to leverage and integrate data measurement, acquisition, storage, analysis, and visualization techniques being developed across the ECP Software Technology ecosystem.


\paragraph{Key Challenges}
In addition to the general challenges faced by all of the SDKs outlined in Section~\ref{subsubsect:ecosystem-sdk}, the unique position of the \tools\ SDK between the hardware teams and the application developers requires additional effort in preparing today’s software to run on yet-unknown architectures and runtimes to be delivered by the end of ECP.

\paragraph{Solution Strategy}
The primary mechanism for mitigating risk in the SDK is the \textit{Readiness Survey}. This survey is designed to assess the current status of each product in the SDK in six key areas: software availability, documentation, testing, Spack build support, SDK integration, and path forward technology utilization. By periodically assessing the progress of the individual L4 products in the SDK, we will use the survey to identify and resolve current hardware architecture dependencies, plan for future architecture changes, and increase adoption of the Continuous Integration (CI) testing workflow to reduce this risk.

Critically, the survey will allow us to accomplish this by providing a direct communication channel between the SDK maintainers and the L4 product developers allowing us to identify current architecture dependencies in each project and compare them with existing and emerging ECP platforms. Our initial efforts will be to increase support for today’s heterogeneous CPU architectures across the DOE facilities (e.g., x86, Power, ARM, etc.) to ensure a minimum level of usability on these platforms. We will then focus on current accelerator architectures- namely GPGPU computing. As new architectures arise, we will re-issue the survey and use this same process to provide guidance to the L4 product as they develop support for them.

The survey also allows us to monitor the increased adoption of the proposed ECP CI testing workflow. This will be crucial to understanding each project’s interoperability with not only the other projects within the Tools SDK, but all applications across the ECP Software Technologies landscape. Additionally, it will serve as a bridge between the Hardware Integration teams working with the facilities and the software teams working across the SDK. By relaying new hardware requirements from the facilities to the software developers, we can closely monitor support for both new and existing systems. Conversely, giving feedback to the facilities regarding compiler support and buildability of library dependencies will guide software adoption on those platforms.

\paragraph{Recent Progress}
The Readiness Survey was re-issued to each L4 product in July 2020. All projects had nominal changes except that HPCToolkit and TAU have added support for both Intel and AMD GPUs. With these changes,  four of the six L4 projects support NVIDIA GPUs, 3/6 support AMD, 2/6 support Intel, and 2/6 have support for all three GPU platforms.

The first step in assessing buildability of the L4 products was carried out in Q2 of FY20. All six projects were built on three platforms (Power9, x86, and Aarch64) using gcc and clang. Initially, only four successfully built with gcc on all platforms, and only one built with clang on any platform. The issues were reported and fixed, and now all six products build with gcc successfully on all three pre-exascale test platforms. The clang builds encountered a large number of issues in both the SDK products and their dependencies. The effort required to fix these issues was larger than the time allocated for the task, so they have been moved to Q1 FY21 as part of a larger procedure to assess LLVM/clang compatibility.

Support for automated testing remains a challenge area that all of the projects are aware of and plan to dedicate time to in FY21 and beyond. In Q2 of FY20, initial assessment of testing capabilities was carried out for two of the six products, Dyninst and TAU, on pre-exascale systems. With this work, both products now have working test suites that can be employed through scriptable executions. This represents an essential component of software sustainability to demonstrate and track correctness in the presence of code changes for these products.

Continuous Integration (CI) testing remains a still-larger challenge for the SDK. This is due in part to some products not having scriptable testing capabilities and also in part to more general challenges of using CI at the facilities through OSTI. With substantial help from Don Magrack at NMC and the CI team at ALCF, the first CI run was successfully carried out using Dyninst using Theta at the Argonne Leadership Compute Facilities in Q4 2020. We note that automated CI testing through OSTI remains as future work until the federated runners are established at the national labs.


\paragraph{Next Steps}
Additional testing using multiple compilers- including some variant of LLVM currently in use by the Compilers and Debuggers SDK- on at least one current DOE facility machine, and preferably one early access system, is our top priority for FY21. Results from these tests will continue to be fed back into the L4 products to further guide development of spack packages, bug/issue-reporting workflows, and integration into the greater ECP software ecosystem. Any discovered issues with Spack, compilers, or libraries will be directly reported back to their respective development teams or L3 representative.

Our KPP3 goals are tightly associated with integrating each L4 product into E4S, and a large part of these goals is getting more products using CI testing. As such, increasing the number of L4 products in the SDK with CI testing adoption is our second goal for FY21. The first CI workflow integration carried out in Q4 2020 established the basic procedure for getting the other products set up. Arguably, establishing this workflow is the largest contribution the Tools SDK will bring to the overall ECP software ecosystem. Having automated testing in place across heterogeneous build environments and target architectures is a fundamental challenge to creating reliable, sustainable software- making this work a critical path to attaining the ECP goals of large-scale software sustainability. We also anticipate that this may be the introduction of formal software testing for some of the L4 products. The heterogeneous nature of the testing available in the Tools SDK L4 products will serve as a focused testbed for constructing implementation guidelines for the CI workflow which can then be applied across the SDK efforts and into the greater ECP software ecosystem. Importantly, these lessons can also be carried on by the individual project teams to help maintain their software beyond the ECP timeline.
